## ğŸ›  ä¸€ã€Node.js æœåŠ¡ç«¯æ€§èƒ½åˆ†æå·¥å…·

### âœ… 1. [**Clinic.js**](https://clinicjs.org/)

> Node å®˜æ–¹æ¨èçš„ä¸€å¥—å¯è§†åŒ–æ€§èƒ½è¯Šæ–­å·¥å…·ç»„åˆ

* ğŸ“¦ å®‰è£…ï¼š`npm i -g clinic`
* ğŸ” å­å·¥å…·ï¼š

  * `clinic doctor`ï¼šè¯Šæ–­æ•´ä½“å¥åº·çŠ¶å†µï¼ˆæ…¢å“åº”ã€äº‹ä»¶å¾ªç¯å µå¡ï¼‰
  * `clinic flame`ï¼šç”Ÿæˆç«ç„°å›¾ï¼Œåˆ†æå‡½æ•°è€—æ—¶
  * `clinic bubbleprof`ï¼šå¯è§†åŒ–å¼‚æ­¥è°ƒç”¨é“¾ç“¶é¢ˆ
  * `clinic heapprofile`ï¼šåˆ†æå†…å­˜æ³„æ¼

```bash
clinic doctor -- node app.js
```

> éå¸¸é€‚åˆå¼€å‘é˜¶æ®µè‡ªæµ‹æ€§èƒ½ç“¶é¢ˆï¼Œå›¾å½¢åŒ–è¾“å‡º

---

### âœ… 2. `--inspect` + Chrome DevTools

* å¯åŠ¨æ–¹å¼ï¼š`node --inspect-brk app.js`
* åœ¨ Chrome è¾“å…¥ï¼š`chrome://inspect`
* æ”¯æŒï¼š

  * CPU Profileï¼šæŸ¥çœ‹æ‰§è¡Œæœ€ä¹…çš„å‡½æ•°
  * Heap Snapshotï¼šå†…å­˜ç»“æ„
  * Timelineï¼šäº‹ä»¶å¾ªç¯ & ä»»åŠ¡é˜Ÿåˆ—å¯è§†åŒ–

âœ… ä¼˜ç‚¹ï¼šä¸è£…æ’ä»¶ï¼Œç›´æ¥ä¸Šæ‰‹
â—é€‚åˆè°ƒè¯•å•ä¸ªæ¨¡å—ã€ç‰¹å®šè¡Œä¸º

---

### âœ… 3. `0x` ç«ç„°å›¾å·¥å…·ï¼ˆç”Ÿäº§å¯ç”¨ï¼‰

```bash
npm i -g 0x
0x app.js
```

* è¾“å‡ºäº¤äº’å¼ HTML ç«ç„°å›¾
* æ¯” `clinic flame` æ›´è½»é‡
* é€‚åˆåˆ†æå¯åŠ¨æ…¢/è®¡ç®—æ…¢çš„ä»£ç æ®µ

---

### âœ… 4. [**benchmark.js**](https://benchmarkjs.com/)

> å•å…ƒæµ‹è¯•çº§åˆ«çš„å‡½æ•°æ€§èƒ½å¯¹æ¯”å·¥å…·

```js
const Benchmark = require('benchmark');

const suite = new Benchmark.Suite;
suite
  .add('for loop', () => {
    for (let i = 0; i < 1000; i++) {}
  })
  .add('while loop', () => {
    let i = 0;
    while (i < 1000) i++;
  })
  .on('complete', function () {
    console.log(this[0].toString());
    console.log(this[1].toString());
  })
  .run();
```

> å¯ä»¥ç›´æ¥åœ¨é¡¹ç›®ä¸­å¯¹å¤šä¸ªå®ç°æ–¹å¼åšå¯¹æ¯”ï¼Œéå¸¸é€‚åˆåšå¾®æ€§èƒ½è°ƒä¼˜ã€‚

---

## ğŸ” äºŒã€ç›‘æ§å†…å­˜ä¸ GC è¡Œä¸º

### âœ… 5. `heapdump`

```bash
npm i heapdump
```

```js
const heapdump = require('heapdump');
heapdump.writeSnapshot('./snap.heapsnapshot');
```

* ç”¨äºåˆ†æå†…å­˜æ³„æ¼
* æ–‡ä»¶å¯æ‹–è¿› Chrome DevTools â†’ Memory â†’ æŸ¥çœ‹é—­åŒ…ä¿ç•™å¯¹è±¡ç­‰

---

## ğŸ§ª ä¸‰ã€å¼€å‘é˜¶æ®µè¾…åŠ©å·¥å…·

### âœ… 6. [**ESLint + Performance æ’ä»¶**](https://www.npmjs.com/package/eslint-plugin-performance)

* è‡ªåŠ¨æ£€æµ‹å¯èƒ½å¯¼è‡´æ€§èƒ½ä½ä¸‹çš„ä»£ç æ¨¡å¼

  * æ¯”å¦‚ `for...in` è¿­ä»£æ•°ç»„
  * ä½¿ç”¨ `Math.pow` æ›¿ä»£ `**`
  * ä½¿ç”¨ `let` å¤šæ¬¡å£°æ˜ç­‰

---

### âœ… 7. VS Code æ’ä»¶

* **Inline Profiler**ï¼ˆJavaScript/TypeScriptï¼‰

  * æ ‡è®°å‡½æ•°æ‰§è¡Œæ¬¡æ•°/æ€§èƒ½çƒ­ç‚¹
* **Jest Bench**

  * å’Œ `benchmark.js` è”åŠ¨
* **CodeTour**

  * ç»“åˆ performance insight ä½œä»£ç â€œæ…¢ç‚¹æ³¨é‡Šâ€

---

## ğŸš€ Bonusï¼šCI/CD ä¸­é›†æˆæ€§èƒ½æµ‹è¯•

* ä½¿ç”¨ `Artillery` æˆ– `Autocannon` åšæ¥å£æ€§èƒ½å‹æµ‹
* åŠ å…¥ CI æµç¨‹ï¼Œè‹¥å“åº”æ—¶é—´ / TPS ä½äºé˜ˆå€¼åˆ™å¤±è´¥

```bash
npx autocannon http://localhost:3000/api/user
```

---

## âœ… æ€»ç»“æ¨èæ¸…å•

| å·¥å…·                          | é€‚åˆåœºæ™¯     | ç‰¹ç‚¹        |
| --------------------------- | -------- | --------- |
| `Clinic.js`                 | æœ¬åœ°å…¨é¢æ€§èƒ½æ£€æµ‹ | å›¾å½¢ç•Œé¢ã€ç»¼åˆè¯Šæ–­ |
| `0x`                        | å‡½æ•°çº§åˆ†æ    | ç«ç„°å›¾è½»é‡å¥½ç”¨   |
| `benchmark.js`              | å•å‡½æ•°å¯¹æ¯”    | ç²¾ç»†åˆ°æ¯«ç§’å·®å¼‚   |
| `heapdump` + Chrome         | å†…å­˜æ³„æ¼è¿½è¸ª   | å®šç‚¹æ‰“å¿«ç…§     |
| `eslint-plugin-performance` | å†™ä»£ç æ—¶å‘ç°éšæ‚£ | è‡ªåŠ¨æ ‡è®°ä½æ•ˆä»£ç   |

